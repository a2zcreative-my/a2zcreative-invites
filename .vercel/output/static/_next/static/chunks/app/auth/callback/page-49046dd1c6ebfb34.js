(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{447:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l});var r=s(5155),t=s(2115);function l(){let[e,a]=(0,t.useState)("Memproses log masuk..."),[s,l]=(0,t.useState)("");(0,t.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=new URLSearchParams(window.location.hash.substring(1)).get("access_token");if(!e){let e=new URLSearchParams(window.location.search),s=e.get("error_description")||e.get("error");if(s){l(s),a("Log masuk gagal");return}l("Token akses tidak ditemui"),a("Log masuk gagal");return}a("Menyegerakkan akaun...");let s=await fetch("/api/auth/oauth-callback",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({access_token:e})}),r=await s.json();s.ok&&r.success?(r.user&&localStorage.setItem("a2z_user",JSON.stringify({name:r.user.name,email:r.user.email,role:r.user.role,avatar_url:r.user.avatar_url})),a("Log masuk berjaya! Mengalihkan..."),setTimeout(()=>{window.location.href=r.redirect||"/pricing/"},1e3)):(l(r.error||"Gagal menyegerakkan akaun"),a("Log masuk gagal"))}catch(e){console.error("OAuth callback error:",e),l("Ralat berlaku semasa log masuk"),a("Log masuk gagal")}};return(0,r.jsx)("div",{className:"auth-page",children:(0,r.jsxs)("div",{className:"loading-overlay",style:{display:"flex"},children:[(0,r.jsxs)("div",{className:"auth-logo",style:{marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[(0,r.jsx)("img",{src:"/logo.png",alt:"A2Z Creative",height:"48"}),(0,r.jsx)("span",{className:"logo-text-gradient",style:{fontSize:"1.5rem"},children:"A2ZCreative"})]}),(0,r.jsx)("div",{className:"loading-card",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"loading-title",style:{color:"#ff6b6b"},children:"Log Masuk Gagal"}),(0,r.jsx)("p",{className:"loading-text",style:{color:"#ff6b6b"},children:s}),(0,r.jsx)("a",{href:"/auth/login",className:"btn btn-primary",style:{marginTop:"1.5rem"},children:"Cuba Lagi"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"spinner-large"}),(0,r.jsx)("h2",{className:"loading-title",children:"Memproses Log Masuk"}),(0,r.jsx)("p",{className:"loading-text",children:e})]})})]})})}},6410:(e,a,s)=>{Promise.resolve().then(s.bind(s,447))}},e=>{e.O(0,[441,964,358],()=>e(e.s=6410)),_N_E=e.O()}]);