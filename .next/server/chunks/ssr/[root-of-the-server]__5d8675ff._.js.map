{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../src/app/auth/callback/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client';\n\nimport { useEffect, useState } from 'react';\n\nexport default function OAuthCallbackPage() {\n    const [status, setStatus] = useState('Memproses log masuk...');\n    const [error, setError] = useState('');\n\n    useEffect(() => {\n        handleCallback();\n    }, []);\n\n    const handleCallback = async () => {\n        try {\n            // Get the hash fragment from URL (Supabase puts tokens there)\n            const hashParams = new URLSearchParams(window.location.hash.substring(1));\n            const accessToken = hashParams.get('access_token');\n\n            if (!accessToken) {\n                // Try to get from query params\n                const queryParams = new URLSearchParams(window.location.search);\n                const errorMsg = queryParams.get('error_description') || queryParams.get('error');\n                if (errorMsg) {\n                    setError(errorMsg);\n                    setStatus('Log masuk gagal');\n                    return;\n                }\n                setError('Token akses tidak ditemui');\n                setStatus('Log masuk gagal');\n                return;\n            }\n\n            setStatus('Menyegerakkan akaun...');\n\n            // Send token to our API to sync with D1 and create session\n            const response = await fetch('/api/auth/oauth-callback', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                credentials: 'include',\n                body: JSON.stringify({ access_token: accessToken })\n            });\n\n            const data = await response.json() as any;\n\n            if (response.ok && data.success) {\n                // Store user info for UI display\n                if (data.user) {\n                    localStorage.setItem('a2z_user', JSON.stringify({\n                        name: data.user.name,\n                        email: data.user.email,\n                        role: data.user.role,\n                        avatar_url: data.user.avatar_url\n                    }));\n                }\n\n                setStatus('Log masuk berjaya! Mengalihkan...');\n\n                // Redirect after short delay\n                setTimeout(() => {\n                    window.location.href = data.redirect || '/pricing/';\n                }, 1000);\n            } else {\n                setError(data.error || 'Gagal menyegerakkan akaun');\n                setStatus('Log masuk gagal');\n            }\n        } catch (err) {\n            console.error('OAuth callback error:', err);\n            setError('Ralat berlaku semasa log masuk');\n            setStatus('Log masuk gagal');\n        }\n    };\n\n    return (\n        <div className=\"auth-page\">\n            <div className=\"loading-overlay\" style={{ display: 'flex' }}>\n                <div className=\"auth-logo\" style={{ marginBottom: '2rem', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '12px' }}>\n                    <img src=\"/logo.png\" alt=\"A2Z Creative\" height=\"48\" />\n                    <span className=\"logo-text-gradient\" style={{ fontSize: '1.5rem' }}>A2ZCreative</span>\n                </div>\n                <div className=\"loading-card\">\n                    {!error ? (\n                        <>\n                            <div className=\"spinner-large\"></div>\n                            <h2 className=\"loading-title\">Memproses Log Masuk</h2>\n                            <p className=\"loading-text\">{status}</p>\n                        </>\n                    ) : (\n                        <>\n                            <h2 className=\"loading-title\" style={{ color: '#ff6b6b' }}>Log Masuk Gagal</h2>\n                            <p className=\"loading-text\" style={{ color: '#ff6b6b' }}>{error}</p>\n                            <a \n                                href=\"/auth/login\" \n                                className=\"btn btn-primary\" \n                                style={{ marginTop: '1.5rem' }}\n                            >\n                                Cuba Lagi\n                            </a>\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}