(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{1154:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2333:(e,a,r)=>{Promise.resolve().then(r.bind(r,5331))},5331:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>y});var t=r(5155),s=r(2115),n=r(6874),i=r.n(n),l=r(5695),d=r(1976),o=r(1688),c=r(7580),u=r(3227),m=r(7037),h=r(5196),p=r(1154);let x=(0,r(9946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var g=r(3145),b=r(5494);let f=[{id:"wedding",label:"Perkahwinan",icon:d.A,description:"Tema romantik dengan RSVP, ucapan tetamu, dan galeri foto."},{id:"birthday",label:"Hari Jadi",icon:o.A,description:"Tema ceria untuk sambutan ulang tahun yang meriah."},{id:"family",label:"Keluarga",icon:c.A,description:"Kenduri, aqiqah, reunion â€” kumpul keluarga dengan mudah."},{id:"business",label:"Korporat",icon:u.A,description:"Seminar, AGM, majlis makan malam syarikat dengan daftar masuk QR."},{id:"community",label:"Komuniti",icon:m.A,description:"Gotong-royong, hari sukan, atau aktiviti kemasyarakatan."}],v={free:{name:"Percuma",price:"RM0",allowedEvents:["wedding","birthday","family","business","community"]},basic:{name:"Asas",price:"RM49",allowedEvents:["wedding","birthday","family","business","community"]},popular:{name:"Popular",price:"RM99",allowedEvents:["wedding","birthday","family"]},business:{name:"Bisnes",price:"RM199",allowedEvents:["business","community"]}};function j(){let e=(0,l.useRouter)(),a=(0,l.useSearchParams)(),[r,n]=(0,s.useState)(null),[d,o]=(0,s.useState)(!1),[c,u]=(0,s.useState)(""),[m,j]=(0,s.useState)(null),y=a.get("package")||"free",w=v[y]||v.free;(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me",{headers:{"Cache-Control":"no-store"},credentials:"include"});if(e.ok){let a=await e.json();a.authenticated&&j(a.user)}}catch(e){console.error("Session check failed:",e)}})()},[y]);let k=f.filter(e=>w.allowedEvents.includes(e.id)),N=async()=>{if(r){o(!0),u("");try{let a=await fetch("/api/events/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventType:r,planId:y}),credentials:"include"}),t=await a.json();if(a.ok&&t.success)e.push(t.redirect||"/dashboard?new=true");else{if(401===a.status){localStorage.removeItem("a2z_user"),window.location.href="/auth/login?redirect=".concat(encodeURIComponent(window.location.pathname+window.location.search));return}throw Error(t.error||"Gagal mencipta jemputan")}}catch(e){console.error(e),u(e.message||"Gagal mencipta jemputan. Sila cuba lagi."),o(!1)}}};return(0,t.jsx)(g.A,{children:(0,t.jsxs)("div",{className:"landing-page h-screen flex flex-col relative overflow-y-auto",children:[(0,t.jsx)(b.A,{}),(0,t.jsx)("div",{className:"flex-grow flex flex-col justify-center items-center w-full px-4 pt-32 pb-24",children:(0,t.jsxs)("div",{className:"w-full max-w-6xl",children:[(0,t.jsx)("div",{className:"text-center mb-8",children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-[var(--brand-gold)]/10 border border-[var(--brand-gold)]/30 rounded-full text-[var(--brand-gold)] text-sm",children:[(0,t.jsx)(h.A,{size:16}),"Pakej Dipilih: ",(0,t.jsx)("strong",{children:w.name})," (",w.price,")"]})}),c&&(0,t.jsx)("div",{className:"max-w-2xl mx-auto mb-8 p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-200 text-center",children:c}),(0,t.jsx)("div",{className:"event-grid",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",maxWidth:"1100px",margin:"0 auto"},children:k.map(e=>{let a=e.icon,s=r===e.id;return(0,t.jsxs)("div",{onClick:()=>n(e.id),className:"event-card cursor-pointer ".concat(s?"selected":""),style:{position:"relative",...s?{borderColor:"var(--brand-gold)",boxShadow:"0 0 30px rgba(212, 175, 55, 0.25)"}:{}},children:[(0,t.jsx)("div",{className:"event-icon-wrap",style:s?{borderColor:"rgba(212, 175, 55, 0.5)",boxShadow:"0 0 20px rgba(212, 175, 55, 0.3)"}:{},children:(0,t.jsx)(a,{className:"event-icon",style:s?{color:"var(--brand-gold)",filter:"drop-shadow(0 0 12px rgba(212, 175, 55, 0.5))"}:{}})}),(0,t.jsx)("h3",{className:"event-name",style:s?{color:"var(--brand-gold)"}:{},children:e.label}),(0,t.jsx)("p",{className:"event-desc",children:e.description}),s&&(0,t.jsx)("div",{style:{position:"absolute",top:"1rem",right:"1rem",width:"28px",height:"28px",background:"var(--brand-gold)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 15px rgba(212, 175, 55, 0.4)"},children:(0,t.jsx)(h.A,{size:16,strokeWidth:3,color:"var(--bg-base)"})})]},e.id)})}),k.length<f.length&&(0,t.jsxs)("p",{className:"text-center text-slate-500 text-sm mt-6",children:["Beberapa jenis majlis tidak tersedia untuk pakej ",w.name,".",(0,t.jsx)(i(),{href:"/pricing",className:"text-[var(--brand-gold)] ml-1 hover:underline",children:"Tukar pakej"})]}),r&&(0,t.jsx)("div",{className:"mt-12 flex justify-center",children:(0,t.jsx)("button",{disabled:d,onClick:N,className:"flex items-center gap-2 px-8 py-4 rounded-full font-bold transition-all bg-[var(--brand-gold)] text-[var(--bg-base)] hover:scale-105 shadow-[0_0_20px_rgba(255,215,0,0.3)]",children:d?(0,t.jsx)(p.A,{size:18,className:"animate-spin"}):(0,t.jsxs)(t.Fragment,{children:["Cipta Jemputan ",(0,t.jsx)(x,{size:18})]})})})]})})]})})}function y(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"landing-page flex items-center justify-center min-h-screen",children:(0,t.jsx)(p.A,{className:"animate-spin text-white",size:48})}),children:(0,t.jsx)(j,{})})}},5695:(e,a,r)=>{"use strict";var t=r(8999);r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})}},e=>{e.O(0,[874,953,122,441,964,358],()=>e(e.s=2333)),_N_E=e.O()}]);