(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{5390:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>g});var t=s(5155),l=s(2115),i=s(6874),n=s.n(i),r=s(5695),o=s(8749),c=s(2657),d=s(1154);let h=(0,s(9492).UU)("https://bzxjsdtkoakscmeuthlu.supabase.co","sb_publishable_ksSZeGQ4toGfqLttrL7Vsw_8Vq2AVxi");function u(){let e=(0,r.useSearchParams)(),[a,s]=(0,l.useState)(""),[i,d]=(0,l.useState)(""),[u,g]=(0,l.useState)(!1),[m,p]=(0,l.useState)(""),[x,j]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[b,y]=(0,l.useState)("Menyegerakkan akaun..."),N=e.get("redirect")||"";(0,l.useEffect)(()=>{k()},[N]);let k=async()=>{try{let e=await fetch("/api/auth/session",{credentials:"include"});if(e.ok){let a=await e.json();if(a.authenticated){let e=N||a.redirect||"/pricing/";window.location.href=e}}}catch(e){console.log("Session check failed")}},w=async e=>{e.preventDefault(),j(!0),p(""),v(!0);try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:i,redirect:N}),credentials:"include"}),s=await e.json();if(!e.ok){p((null==s?void 0:s.error)||"Login gagal"),v(!1),j(!1);return}(null==s?void 0:s.redirect)&&(y((null==s?void 0:s.message)||"Log masuk berjaya..."),setTimeout(()=>{window.location.href=null==s?void 0:s.redirect},1e3))}catch(e){p("Ralat bersambung. Sila cuba lagi."),v(!1),j(!1)}},S=async()=>{j(!0),v(!0),y("Penyambungan dengan Google...");try{N&&sessionStorage.setItem("a2z_redirect",N);let{data:e,error:a}=await h.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(a)throw a}catch(e){console.error("Google login error:",e),p("Ralat Google OAuth. Sila cuba lagi."),v(!1),j(!1)}};return(0,t.jsxs)("div",{className:"auth-page",children:[(0,t.jsxs)("div",{className:"auth-container",children:[(0,t.jsxs)("div",{className:"auth-logo",children:[(0,t.jsxs)(n(),{href:"/",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",textDecoration:"none"},children:[(0,t.jsx)("img",{src:"/logo.png",alt:"A2Z Creative",height:"48",style:{height:"48px",width:"auto"}}),(0,t.jsx)("span",{className:"logo-text-gradient",style:{fontSize:"1.5rem"},children:"A2ZCreative"})]}),(0,t.jsx)("p",{children:"Jemputan Digital Profesional"})]}),(0,t.jsxs)("div",{className:"auth-card",children:[(0,t.jsx)("h2",{children:"Log Masuk"}),m&&(0,t.jsx)("div",{className:"auth-error",style:{display:"block"},children:m}),(0,t.jsx)("div",{className:"social-buttons",children:(0,t.jsxs)("button",{type:"button",className:"social-btn google",onClick:S,disabled:x,children:[(0,t.jsxs)("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[(0,t.jsx)("path",{fill:"#DB4437",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"#4285F4",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Log masuk dengan Google"]})}),(0,t.jsx)("div",{className:"auth-divider",children:(0,t.jsx)("span",{children:"atau"})}),(0,t.jsxs)("form",{className:"auth-form",onSubmit:w,children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"email",children:"Emel"}),(0,t.jsx)("input",{type:"email",id:"email",placeholder:"nama@contoh.com",value:a,onChange:e=>s(e.target.value),required:!0,disabled:x})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"password",children:"Kata Laluan"}),(0,t.jsxs)("div",{className:"password-wrapper",children:[(0,t.jsx)("input",{type:u?"text":"password",id:"password",placeholder:"••••••••",value:i,onChange:e=>d(e.target.value),required:!0,minLength:6,disabled:x}),(0,t.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>g(!u),disabled:x,children:u?(0,t.jsx)(o.A,{size:20}):(0,t.jsx)(c.A,{size:20})})]})]}),(0,t.jsx)("div",{className:"forgot-link",children:(0,t.jsx)(n(),{href:"/auth/forgot-password",children:"Lupa kata laluan?"})}),(0,t.jsx)("button",{type:"submit",className:"auth-submit",disabled:x,children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner"}),(0,t.jsx)("span",{children:"Memproses..."})]}):(0,t.jsx)("span",{className:"btn-text",children:"Log Masuk"})})]}),(0,t.jsxs)("div",{className:"auth-footer",children:["Belum ada akaun? ",(0,t.jsx)(n(),{href:"/auth/register",children:"Daftar sekarang"})]})]})]}),f&&(0,t.jsxs)("div",{className:"loading-overlay",style:{display:"flex"},children:[(0,t.jsxs)("div",{className:"auth-logo",style:{marginBottom:"2rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[(0,t.jsx)("img",{src:"/logo.png",alt:"A2Z Creative",height:"48",style:{height:"48px",width:"auto"}}),(0,t.jsx)("span",{className:"logo-text-gradient",style:{fontSize:"1.5rem"},children:"A2ZCreative"})]}),(0,t.jsxs)("div",{className:"loading-card",children:[(0,t.jsx)("div",{className:"spinner-large"}),(0,t.jsx)("h2",{className:"loading-title",children:"Memproses Log Masuk"}),(0,t.jsx)("p",{className:"loading-text",children:b})]})]})]})}function g(){return(0,t.jsx)(l.Suspense,{fallback:(0,t.jsx)("div",{className:"auth-page",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:(0,t.jsx)(d.A,{className:"animate-spin",size:48,style:{color:"var(--brand-gold)"}})}),children:(0,t.jsx)(u,{})})}},6092:(e,a,s)=>{Promise.resolve().then(s.bind(s,5390))}},e=>{e.O(0,[874,679,441,964,358],()=>e(e.s=6092)),_N_E=e.O()}]);