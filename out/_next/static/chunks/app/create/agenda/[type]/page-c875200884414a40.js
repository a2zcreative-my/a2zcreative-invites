(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{2525:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});let a=(0,i(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},4616:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});let a=(0,i(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4726:(e,t,i)=>{Promise.resolve().then(i.bind(i,6579))},6579:(e,t,i)=>{"use strict";i.d(t,{default:()=>f});var a=i(5155),s=i(2115),n=i(5695),r=i(5169),l=i(2525),c=i(4616),d=i(3311),m=i(6874),o=i.n(m),h=i(3145),u=i(5494),v=i(7896),x=i(5713),y=i(515),p=i(9638);let b={wedding:[{id:"1",time:"11:00",activity:"Ketibaan Tetamu"},{id:"2",time:"12:00",activity:"Ketibaan Pengantin"},{id:"3",time:"12:30",activity:"Majlis Bersanding"},{id:"4",time:"13:00",activity:"Makan Beradab"},{id:"5",time:"14:30",activity:"Sesi Fotografi"},{id:"6",time:"16:00",activity:"Bersurai"}],birthday:[{id:"1",time:"14:00",activity:"Ketibaan Tetamu"},{id:"2",time:"14:30",activity:"Permainan & Aktiviti"},{id:"3",time:"15:30",activity:"Potong Kek & Nyanyian"},{id:"4",time:"16:00",activity:"Makan & Minum"},{id:"5",time:"17:00",activity:"Pembukaan Hadiah"},{id:"6",time:"17:30",activity:"Bersurai"}],business:[{id:"1",time:"08:00",activity:"Pendaftaran"},{id:"2",time:"08:30",activity:"Ucapan Aluan"},{id:"3",time:"09:00",activity:"Sesi Pembentangan"},{id:"4",time:"10:30",activity:"Rehat Kopi"},{id:"5",time:"11:00",activity:"Sesi Perbincangan"},{id:"6",time:"12:30",activity:"Makan Tengahari"},{id:"7",time:"14:00",activity:"Penutup"}],corporate:[{id:"1",time:"18:00",activity:"Ketibaan Tetamu"},{id:"2",time:"18:30",activity:"Koktel & Networking"},{id:"3",time:"19:00",activity:"Ucapan Pengerusi"},{id:"4",time:"19:30",activity:"Makan Malam"},{id:"5",time:"21:00",activity:"Majlis Anugerah"},{id:"6",time:"22:00",activity:"Bersurai"}],family:[{id:"1",time:"10:00",activity:"Ketibaan Keluarga"},{id:"2",time:"11:00",activity:"Aktiviti Bersama"},{id:"3",time:"12:30",activity:"Makan Tengahari"},{id:"4",time:"14:00",activity:"Sesi Fotografi"},{id:"5",time:"15:00",activity:"Bersurai"}],community:[{id:"1",time:"07:00",activity:"Pendaftaran & Sarapan"},{id:"2",time:"08:00",activity:"Taklimat"},{id:"3",time:"08:30",activity:"Aktiviti Utama"},{id:"4",time:"11:00",activity:"Rehat"},{id:"5",time:"12:00",activity:"Penutup & Bersurai"}]};function f(){let e=(0,n.useRouter)(),t=(0,n.useParams)(),i=(0,n.useSearchParams)(),m=t.type,f=i.get("slug"),g=i.get("package")||"free",[j,k]=(0,s.useState)(!0),[N,w]=(0,s.useState)(!1),[A,M]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{if(!f)return k(!1);try{let e=await fetch("/api/events/get-details?slug=".concat(f));if(e.ok){let t=await e.json();t.success&&t.eventDetails&&(t.eventDetails.schedule&&Array.isArray(t.eventDetails.schedule)&&t.eventDetails.schedule.length>0?M(t.eventDetails.schedule):M(b[m]||b.wedding))}}catch(e){console.error("Error fetching event data:",e),M(b[m]||b.wedding)}finally{k(!1)}})()},[f,m]);let S=(e,t,i)=>{M(A.map(a=>a.id===e?{...a,[t]:i}:a))},P=async t=>{t.preventDefault(),w(!0);let i=A.filter(e=>""!==e.time.trim()||""!==e.activity.trim());try{(await fetch("/api/events/update-details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:f,type:m,eventDetails:{schedule:i}})})).ok?e.push("/create/theme/".concat(m,"?slug=").concat(f,"&package=").concat(g)):console.error("Failed to save details")}catch(e){console.error("Error saving details:",e)}finally{w(!1)}};return f?(0,a.jsx)(h.A,{children:(0,a.jsxs)("div",{className:"min-h-screen pb-20",children:[(0,a.jsx)(u.A,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4",style:{paddingTop:"120px"},children:[(0,a.jsxs)("div",{className:"max-w-2xl mx-auto mb-8",children:[(0,a.jsxs)(o(),{href:"/create/form/".concat(m,"?slug=").concat(f,"&package=").concat(g),className:"inline-flex items-center gap-2 text-slate-400 hover:text-white transition-colors mb-6",children:[(0,a.jsx)(r.A,{size:18}),"Kembali"]}),(0,a.jsx)(v.A,{currentStep:3,eventType:m})]}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Aturcara Majlis"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Susun atur perjalanan majlis anda."})]}),j?(0,a.jsx)("div",{className:"flex justify-center py-10",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-[var(--brand-gold)]/30 border-t-[var(--brand-gold)] rounded-full animate-spin"})}):(0,a.jsxs)("form",{onSubmit:P,className:"w-full",children:[(0,a.jsxs)(x.A,{variant:"deep",className:"mb-6",children:[(0,a.jsxs)("table",{className:"w-full border-separate border-spacing-y-3",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"w-[240px] text-left pb-2 text-sm font-semibold text-slate-300",children:"Time"}),(0,a.jsx)("th",{className:"text-left pb-2 text-sm font-semibold text-slate-300",children:"Aktiviti / Butiran"}),(0,a.jsx)("th",{className:"w-[80px] text-center pb-2 text-sm font-semibold text-slate-300",children:"Delete"})]})}),(0,a.jsx)("tbody",{children:A.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"w-[240px] pr-3 align-top",children:(0,a.jsx)(p.A,{value:e.time,onChange:t=>S(e.id,"time",t.target.value),name:"time-".concat(e.id),placeholder:"--:-- --"})}),(0,a.jsx)("td",{className:"pr-3 align-top",children:(0,a.jsx)("input",{type:"text",value:e.activity,onChange:t=>S(e.id,"activity",t.target.value),placeholder:"Masukkan aktiviti...",className:"w-full h-[48px] px-4 py-3 bg-[#020617]/30 backdrop-blur-sm border border-white/10 rounded-xl text-white text-base placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-[var(--brand-gold)]/50 focus:border-transparent transition-all duration-300"})}),(0,a.jsx)("td",{className:"align-top",children:(0,a.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void M(A.filter(e=>e.id!==t))},className:"w-full h-[48px] flex items-center justify-center bg-white/5 border border-white/10 rounded-xl text-slate-400 hover:text-red-400 hover:bg-red-500/10 hover:border-red-500/20 transition-all",title:"Padam slot ini",children:(0,a.jsx)(l.A,{size:18})})})]},e.id))})]}),(0,a.jsx)("div",{className:"flex justify-end mt-4 mb-2",children:(0,a.jsx)(y.A,{type:"button",onClick:()=>{M([...A,{id:Date.now().toString(),time:"",activity:""}])},variant:"secondary",size:"sm",leftIcon:(0,a.jsx)(c.A,{size:16}),children:"Tambah Slot"})})]}),(0,a.jsx)(y.A,{type:"submit",variant:"primary",size:"lg",className:"w-full font-bold shadow-xl shadow-[var(--brand-gold)]/10",isLoading:N,rightIcon:(0,a.jsx)(d.A,{size:18}),children:"Simpan & Teruskan"})]})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center text-white",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Sesi tidak sah"}),(0,a.jsx)(o(),{href:"/create",className:"text-[var(--brand-gold)] hover:underline",children:"Kembali ke pemilihan majlis"})]})})}}},e=>{e.O(0,[545,874,953,891,494,933,441,964,358],()=>e(e.s=4726)),_N_E=e.O()}]);